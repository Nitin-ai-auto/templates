<!-- Global Scripts - Webflow-Free Version -->

<!-- Core Libraries -->
<script
    src="https://d3e54v103j8qbb.cloudfront.net/js/jquery-3.5.1.min.dc5e7f18c8.js?site=66d80d61bcbc2701c640232c"></script>
<script src="https://ajax.googleapis.com/ajax/libs/webfont/1.6.26/webfont.js"></script>

<!-- Analytics & Tracking -->
<script src="https://www.googletagmanager.com/gtag/js?id=G-QKK3XRK2R2"></script>
<script src="https://www.googletagmanager.com/gtm.js?id=GTM-WW5MJJW2"></script>
<script src="https://analytics.ahrefs.com/analytics.js"></script>
<script
    src="https://cdn.prod.website-files.com/66d80d61bcbc2701c640232c/652d31f3dc22d7b4ee708e44/68304790754e563561712244/clarity_script-0.6.7.js"></script>
<script src="https://scripts.clarity.ms/0.8.24/clarity.js"></script>
<script src="https://connect.facebook.net/en_US/fbevents.js"></script>
<script src="https://cdn.amplitude.com/libs/analytics-browser-gtm-2.11.8-min.js.gz"></script>
<script src="https://cdn.amplitude.com/libs/analytics-browser-gtm-wrapper-3.11.2.js.br"></script>

<!-- Marketing & Lead Generation -->
<script src="https://getlaunchlist.com/js/widget-diy.js"></script>
<script src="https://r2.leadsy.ai/tag.js"></script>
<script src="https://cdn.firstpromoter.com/fpr.js"></script>
<script src="https://assets.mailerlite.com/js/universal.js"></script>

<!-- UI Components & Utilities -->
<script src="https://app.termly.io/resource-blocker/5c8d97b3-1ff5-476c-b82c-ed8897c3bf78?autoBlock=on"></script>
<script src="https://cdn.jsdelivr.net/npm/lumious-components@latest/component/ticker.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/intl-tel-input/17.0.13/js/intlTelInput-jquery.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-nice-select/1.1.0/js/jquery.nice-select.min.js"></script>

<!-- Performance & Monitoring -->
<script defer
    src="https://static.cloudflareinsights.com/beacon.min.js/vcd15cbe7772f49c399c6a5babf22c1241717689176015"></script>

<!-- Webflow Replacement - Custom Vanilla JS -->
<script>
    /**
     * WEBFLOW-FREE REPLACEMENT SCRIPT
     * Replicates all Webflow functionality without any Webflow dependencies
     */
    (function () {
        'use strict';

        // Wait for DOM to be ready
        function ready(fn) {
            if (document.readyState !== 'loading') {
                fn();
            } else {
                document.addEventListener('DOMContentLoaded', fn);
            }
        }

        ready(function () {
            // Add w-mod-js class for CSS compatibility (Webflow CSS expects this)
            document.documentElement.classList.add('w-mod-js');

            // Add touch detection
            if ('ontouchstart' in window || navigator.maxTouchPoints > 0) {
                document.documentElement.classList.add('w-mod-touch');
            } else {
                document.documentElement.classList.add('w-mod-no-touch');
            }

            // Initialize all Webflow-like components
            initNavbar();
            initDropdowns();
            initTabs();
            initSliders();
            initLightbox();
            initForms();
            initIX(); // Interactions
        });

        /**
         * NAVBAR FUNCTIONALITY
         * Handles mobile menu toggle and sticky behavior
         */
        function initNavbar() {
            const navbars = document.querySelectorAll('[data-collapse]');

            navbars.forEach(navbar => {
                const menuButton = navbar.querySelector('.w-nav-button');
                const menu = navbar.querySelector('.w-nav-menu');
                const overlay = navbar.querySelector('.w-nav-overlay');

                if (!menuButton || !menu) return;

                // Toggle menu
                menuButton.addEventListener('click', function (e) {
                    e.preventDefault();
                    const isOpen = menu.classList.contains('w--open');

                    if (isOpen) {
                        closeMenu();
                    } else {
                        openMenu();
                    }
                });

                function openMenu() {
                    menu.classList.add('w--open');
                    menuButton.classList.add('w--open');
                    if (overlay) overlay.classList.add('w--open');
                    document.body.style.overflow = 'hidden';
                }

                function closeMenu() {
                    menu.classList.remove('w--open');
                    menuButton.classList.remove('w--open');
                    if (overlay) overlay.classList.remove('w--open');
                    document.body.style.overflow = '';
                }

                // Close on overlay click
                if (overlay) {
                    overlay.addEventListener('click', closeMenu);
                }

                // Close on ESC key
                document.addEventListener('keydown', function (e) {
                    if (e.key === 'Escape' && menu.classList.contains('w--open')) {
                        closeMenu();
                    }
                });

                // Close menu on window resize if open
                let resizeTimer;
                window.addEventListener('resize', function () {
                    clearTimeout(resizeTimer);
                    resizeTimer = setTimeout(function () {
                        if (window.innerWidth > 991 && menu.classList.contains('w--open')) {
                            closeMenu();
                        }
                    }, 250);
                });
            });
        }

        /**
         * DROPDOWN FUNCTIONALITY
         * Handles hover and click dropdowns
         */
        function initDropdowns() {
            const dropdowns = document.querySelectorAll('.w-dropdown');

            dropdowns.forEach(dropdown => {
                const toggle = dropdown.querySelector('.w-dropdown-toggle');
                const list = dropdown.querySelector('.w-dropdown-list');

                if (!toggle || !list) return;

                const isHover = dropdown.getAttribute('data-hover') === 'true';
                const delay = Number(dropdown.getAttribute('data-delay') || 0);
                let timeout;

                if (isHover) {
                    // Hover behavior
                    dropdown.addEventListener('mouseenter', function () {
                        clearTimeout(timeout);
                        timeout = setTimeout(() => openDropdown(), delay);
                    });

                    dropdown.addEventListener('mouseleave', function () {
                        clearTimeout(timeout);
                        timeout = setTimeout(() => closeDropdown(), delay);
                    });
                } else {
                    // Click behavior
                    toggle.addEventListener('click', function (e) {
                        e.preventDefault();
                        e.stopPropagation();

                        if (dropdown.classList.contains('w--open')) {
                            closeDropdown();
                        } else {
                            // Close other dropdowns
                            document.querySelectorAll('.w-dropdown.w--open').forEach(d => {
                                if (d !== dropdown) {
                                    d.classList.remove('w--open');
                                    const dList = d.querySelector('.w-dropdown-list');
                                    if (dList) dList.classList.remove('w--open');
                                }
                            });
                            openDropdown();
                        }
                    });
                }

                function openDropdown() {
                    dropdown.classList.add('w--open');
                    list.classList.add('w--open');
                    toggle.setAttribute('aria-expanded', 'true');
                }

                function closeDropdown() {
                    dropdown.classList.remove('w--open');
                    list.classList.remove('w--open');
                    toggle.setAttribute('aria-expanded', 'false');
                }

                // Close on outside click
                document.addEventListener('click', function (e) {
                    if (!dropdown.contains(e.target) && dropdown.classList.contains('w--open')) {
                        closeDropdown();
                    }
                });
            });
        }

        /**
         * TABS FUNCTIONALITY
         * Handles tab switching
         */
        function initTabs() {
            const tabsContainers = document.querySelectorAll('[data-duration]');

            tabsContainers.forEach(container => {
                const tabLinks = container.querySelectorAll('.w-tab-link');
                const tabPanes = container.querySelectorAll('.w-tab-pane');

                tabLinks.forEach((link, index) => {
                    link.addEventListener('click', function (e) {
                        e.preventDefault();

                        // Remove active from all
                        tabLinks.forEach(l => l.classList.remove('w--current'));
                        tabPanes.forEach(p => p.classList.remove('w--tab-active'));

                        // Add active to clicked
                        link.classList.add('w--current');
                        if (tabPanes[index]) {
                            tabPanes[index].classList.add('w--tab-active');
                        }
                    });
                });
            });
        }

        /**
         * SLIDER FUNCTIONALITY
         * Basic slider/carousel
         */
        function initSliders() {
            const sliders = document.querySelectorAll('.w-slider');

            sliders.forEach(slider => {
                const mask = slider.querySelector('.w-slider-mask');
                const slides = slider.querySelectorAll('.w-slide');
                const leftArrow = slider.querySelector('.w-slider-arrow-left');
                const rightArrow = slider.querySelector('.w-slider-arrow-right');
                const nav = slider.querySelector('.w-slider-nav');

                if (!mask || slides.length === 0) return;

                let currentIndex = 0;
                const autoplay = slider.getAttribute('data-autoplay') === 'true';
                const duration = Number(slider.getAttribute('data-duration') || 500);
                const delay = Number(slider.getAttribute('data-delay') || 4000);
                let autoplayInterval;

                // Create nav dots if nav exists
                if (nav) {
                    nav.innerHTML = '';
                    slides.forEach((_, i) => {
                        const dot = document.createElement('div');
                        dot.className = 'w-slider-dot' + (i === 0 ? ' w-active' : '');
                        dot.addEventListener('click', () => goToSlide(i));
                        nav.appendChild(dot);
                    });
                }

                function goToSlide(index) {
                    if (index < 0) index = slides.length - 1;
                    if (index >= slides.length) index = 0;

                    currentIndex = index;
                    const offset = -100 * index;
                    mask.style.transform = `translateX(${offset}%)`;

                    // Update active states
                    slides.forEach((slide, i) => {
                        slide.classList.toggle('w-active', i === index);
                    });

                    if (nav) {
                        const dots = nav.querySelectorAll('.w-slider-dot');
                        dots.forEach((dot, i) => {
                            dot.classList.toggle('w-active', i === index);
                        });
                    }
                }

                function nextSlide() {
                    goToSlide(currentIndex + 1);
                }

                function prevSlide() {
                    goToSlide(currentIndex - 1);
                }

                if (leftArrow) leftArrow.addEventListener('click', prevSlide);
                if (rightArrow) rightArrow.addEventListener('click', nextSlide);

                // Autoplay
                if (autoplay) {
                    autoplayInterval = setInterval(nextSlide, delay);

                    slider.addEventListener('mouseenter', () => clearInterval(autoplayInterval));
                    slider.addEventListener('mouseleave', () => {
                        autoplayInterval = setInterval(nextSlide, delay);
                    });
                }

                // Initialize
                goToSlide(0);
            });
        }

        /**
         * LIGHTBOX FUNCTIONALITY
         * Image lightbox
         */
        function initLightbox() {
            const lightboxLinks = document.querySelectorAll('.w-lightbox');

            lightboxLinks.forEach(link => {
                link.addEventListener('click', function (e) {
                    e.preventDefault();
                    const imgSrc = this.href || this.querySelector('img')?.src;
                    if (!imgSrc) return;

                    // Create lightbox
                    const lightbox = document.createElement('div');
                    lightbox.className = 'w-lightbox-backdrop';
                    lightbox.innerHTML = `
                    <div class="w-lightbox-container">
                        <div class="w-lightbox-content">
                            <img src="${imgSrc}" alt="">
                        </div>
                        <div class="w-lightbox-close"></div>
                    </div>
                `;

                    document.body.appendChild(lightbox);
                    document.body.style.overflow = 'hidden';

                    // Close handlers
                    const close = () => {
                        lightbox.remove();
                        document.body.style.overflow = '';
                    };

                    lightbox.querySelector('.w-lightbox-close').addEventListener('click', close);
                    lightbox.addEventListener('click', function (e) {
                        if (e.target === lightbox) close();
                    });
                    document.addEventListener('keydown', function (e) {
                        if (e.key === 'Escape') close();
                    }, { once: true });
                });
            });
        }

        /**
         * FORM FUNCTIONALITY
         * Form validation and submission
         */
        function initForms() {
            const forms = document.querySelectorAll('.w-form form');

            forms.forEach(form => {
                form.addEventListener('submit', function (e) {
                    // Basic validation
                    const requiredFields = form.querySelectorAll('[required]');
                    let isValid = true;

                    requiredFields.forEach(field => {
                        if (!field.value.trim()) {
                            isValid = false;
                            field.classList.add('w-input-error');
                        } else {
                            field.classList.remove('w-input-error');
                        }
                    });

                    if (!isValid) {
                        e.preventDefault();
                    }
                });
            });
        }

        /**
         * INTERACTIONS (IX)
         * Basic scroll and click interactions
         */
        function initIX() {
            // Scroll-based animations
            const scrollElements = document.querySelectorAll('[data-ix]');

            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('w--ix-triggered');
                    }
                });
            }, { threshold: 0.1 });

            scrollElements.forEach(el => observer.observe(el));
        }

    })();
</script>